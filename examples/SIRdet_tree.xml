<beast version="2.0" namespace="beast.core.parameter:beast.core:remaster">
    <run spec="Simulator" nSims="1">
        <simulate spec="SimulatedTree" id="SIRTree">
            <trajectory spec="DeterministicTrajectory" id="SIRTrajectory"
                        maxTime="10"
                        endsWhen="I&lt;1 &amp;&amp; S&lt;500">
                <population spec="RealParameter" id="S" value="1000"/>
                <population spec="RealParameter" id="I" value="1"/>
                <population spec="RealParameter" id="R" value="0"/>
                <samplePopulation spec="RealParameter" id="sample" value="0"/>

                <reaction spec="Reaction" rate="0.01"> S + I -> 2I </reaction>
                <reaction spec="Reaction" rate="0 1" changeTimes="2"> I -> R </reaction>
                <reaction spec="Reaction" rate="0.1"> I -> sample</reaction>
            </trajectory>
        </simulate>

        <logger spec="Logger" fileName="$(filebase).traj">
            <log idref="SIRTrajectory"/>
        </logger>
        <logger spec="Logger" mode="tree" fileName="$(filebase).typed.tree">
            <log spec="TypedTreeLogger" tree="@SIRTree"/>
        </logger>
        <logger spec="Logger" fileName="$(filebase).tree">
            <log idref="SIRTree"/>
        </logger>
    </run>
</beast>