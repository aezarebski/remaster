<!-- Coalescent tree simulation demonstrating different ways of producing
     non-contemporaneous tips -->

<beast version="2.0"
       namespace="beast.base.inference.parameter:remaster
                  :beast.base.evolution.tree.coalescent">
  <run spec="Simulator" nSims="100">
    <simulate id="tree" spec="SimulatedTree">
      <trajectory id="traj" spec="CoalescentTrajectory">
        <population id="pop" spec="ConstantPopulation" popSize="1.0"/>

        <!-- Generate a 200 leaves evenly spaced between times 0 and 1 before the present. -->
        <reaction spec="PunctualReaction" n="1">
          <times spec="feast.function.Sequence" start="0" stop="1" length="200"/>
          0 -> pop
        </reaction>

        <!-- Generate a 200 leaves with times sampled from Unif(2,3). -->
        <reaction spec="PunctualReaction" n="1">
          <times id="t" spec="feast.parameter.RandomRealParameter" dimension="200" value="0">
            <distr spec="beast.base.inference.distribution.Uniform" lower="2" upper="3"/>
          </times>
          0 -> pop
        </reaction>

        <!-- Generate leaves at a fixed rate of 200 between times 4 and 5.
             The total number of leaves generated by this fixed-rate
             Poisson process will be distributed according to Pois(200). -->
        <reaction spec="Reaction" rate="0 200 0" changeTimes="4 5">
          0 -> pop
        </reaction>

      </trajectory>
    </simulate>

    <logger fileName="$(filebase).trees" mode="tree">
      <log spec="TypedTreeLogger" tree="@tree"/>
    </logger>
  </run>
</beast>
